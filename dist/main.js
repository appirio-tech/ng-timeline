(function() {
  'use strict';
  var dependencies;

  dependencies = ['ui.router', 'ngResource', 'app.constants', 'appirio-tech-messaging', 'appirio-tech-ng-api-services'];

  angular.module('appirio-tech-ng-timeline', dependencies);

}).call(this);

angular.module("appirio-tech-ng-timeline").run(["$templateCache", function($templateCache) {$templateCache.put("views/timeline.directive.html","<h1>Project Timeline</h1><hr/><ul><li ng-class=\"{ completed: vm.completed.submitted, expanded: vm.expanded.submitted }\" ng-click=\"vm.expanded.submitted = !vm.expanded.submitted\" class=\"milestone completed\"><section class=\"checkpoint\"><div class=\"progress\"><div class=\"percent\">0%</div><div class=\"status\">Complete</div><div class=\"day\">Day 1</div></div><div class=\"lead\"></div><button class=\"clean point\"></button><div class=\"lead-after\"></div><ul class=\"headings\"><li><button class=\"clean\"><h4>Project Submitted</h4></button></li><li><time>{{ vm.completed.submitted | date }}</time></li></ul></section><hr/></li><li><ul ng-show=\"vm.expanded.submitted\" class=\"events\"><li ng-class=\"{ completed: vm.events.confirmEmail.created, passed: vm.events.assignCopilot.created }\"><section class=\"checkpoint\"><div class=\"progress\"><div class=\"percent\">6%</div><div class=\"status\">Complete</div><div class=\"day\">Day 1</div></div><div class=\"lead\"></div><div class=\"point\"></div><div class=\"lead-after\"></div><p ng-hide=\"vm.events.confirmEmail.created\">We sent an email to {{ vm.events.confirmEmail.address }}. <br /> Click the link in the email to verify your email address.</p><p ng-show=\"vm.events.confirmEmail.created\">Thanks! Your email is verified.</p></section><button ng-hide=\"vm.events.confirmEmail.created\">Re-send email</button></li><li ng-class=\"{ completed: vm.events.assignCopilot.created, passed: vm.events.quote.created, expanded: 1 }\"><section class=\"checkpoint\"><div class=\"progress\"><div class=\"percent\">5%</div><div class=\"status\">Complete</div><div class=\"day\">Day 1</div></div><div class=\"lead\"></div><div class=\"point\"></div><div class=\"lead-after\"></div><p ng-hide=\"vm.events.assignCopilot.created\">Assign Co-Pilot</p><p ng-show=\"vm.events.confirmEmail.created &amp;&amp; !vm.events.assignCopilot.created\">We are choosing a Co-Pilot best suited for your project.</p><ul class=\"headings\"><li><p ng-show=\"vm.events.assignCopilot.created\">Co-Pilot Assigned</p></li><li><time>{{ vm.events.assignCopilot.created }}</time></li></ul></section><div ng-show=\"vm.events.assignCopilot.handle\" class=\"avatar-box\"><avatar url=\"{{ vm.events.assignCopilot.avatar }}\"></avatar>Hi I\'m <a href=\"#\">{{ vm.events.assignCopilot.handle }}</a>. I\'ll be your project manager.</div></li><li ng-class=\"{ completed: vm.events.quote.created, passed: vm.events.payment.created }\" class=\"quote\"><section class=\"checkpoint\"><div class=\"progress\"><div class=\"percent\">15%</div><div class=\"status\">Complete</div><div class=\"day\">Day 1</div></div><div class=\"lead\"></div><div class=\"point\"></div><div class=\"lead-after\"></div><p ng-hide=\"vm.events.quote.created\">Generate Quote</p><p ng-show=\"vm.events.quote.created\"><div class=\"carat\"></div>Quote has been generated.</p></section><p ng-show=\"vm.events.quote.created &amp;&amp; !vm.events.payment.created\"><a href=\"#\">View quote and pay to continue.</a></p><div class=\"expandable-content\"><button type=\"button\" class=\"clean close\">x</button><ul><li><label>Cost:</label> \n${{ vm.events.quote.price }}</li><li><label>Time:</label> \n{{ vm.events.quote.duration }} Days</li></ul><ul><li class=\"accept\"><button>Accept</button></li><li><button>Reject</button></li></ul></div></li><li ng-class=\"{ completed: vm.events.paymentAccepted.created, passed: vm.events.launch.created }\"><section class=\"checkpoint\"><div class=\"progress\"><div class=\"percent\">20%</div><div class=\"status\">Complete</div><div class=\"day\">Day 1</div></div><div class=\"lead\"></div><div class=\"point\"></div><div class=\"lead-after\"></div><p ng-hide=\"vm.events.paymentAccepted.created\">Add Payment Method</p><p ng-show=\"vm.events.paymentAccepted.created\">Payment Method Accepted.</p></section></li></ul></li><li ng-class=\"{ completed: vm.events.launch.created, passed: vm.events.launch.created, expanded: vm.expanded.launched }\" ng-click=\"vm.expanded.launched = !vm.expanded.launched\" class=\"milestone\"><section class=\"checkpoint\"><div class=\"progress\"><div class=\"percent\">25%</div><div class=\"status\">Complete</div><div class=\"day\">Day 1</div></div><div class=\"lead\"></div><button class=\"clean point\"></button><div class=\"lead-after\"></div><ul class=\"headings\"><li><h4>Project Launched</h4></li><li><time>{{ vm.events.launch.created }}</time></li></ul></section><hr/></li><li><ul ng-show=\"vm.expanded.launched\" class=\"events\"><li ng-class=\"{ completed: vm.events.members.length, passed: 1, expanded: vm.expanded.launched }\"><section class=\"checkpoint\"><div class=\"progress\"><div class=\"percent\">35%</div><div class=\"status\">Complete</div><div class=\"day\">Day 1</div></div><div class=\"lead\"></div><div class=\"point icon\"></div><div class=\"lead-after\"></div><p><div class=\"carat\"></div><span>{{ vm.events.members.length }} member(s) have joined.</span></p></section><div class=\"expandable-content\"><button type=\"button\" class=\"clean close\">&times;</button><ul><li ng-repeat=\"member in vm.events.members track by $index\"><avatar url=\"{{ member.avatar }}\"></avatar><a>{{ member.handle }} </a>joined the project.</li></ul></div></li><li ng-show=\"vm.expanded.launched\" class=\"notification messages no-progress completed\"><section class=\"checkpoint\"><button ng-click=\"vm.showMessagingWidget = true\" class=\"point count clean\"><div class=\"notification\">{{ message.notification }}</div></button><div class=\"lead-after\"></div><p><avatar url=\"{{ message.avatar }}\"></avatar>{{ message.message }}</p></section><ul class=\"links\"><li><button ng-click=\"vm.showMessagingWidget = true\" class=\"clean\">View</button></li><li><a ui-sref=\"messaging({ id: message.threadId })\">View full thread</a></li></ul><div ng-class=\"{ active: vm.showMessagingWidget }\" class=\"expandable-content\"><button ng-click=\"vm.showMessagingWidget = false\" class=\"clean close\">&times;</button><messaging thread-id=\"{{ message.threadId }}\" subscriber-id=\"Batman\" class=\"widget\"></messaging></div></li></ul></li><li ng-class=\"{ completed: vm.events.designConcepts.created, passed: vm.events.designConcepts.created, expanded: vm.expanded.designConcepts }\" ng-click=\"vm.expanded.designConcepts = !vm.expanded.designConcepts\" class=\"milestone\"><section class=\"checkpoint\"><div class=\"progress\"><div class=\"percent\">55%</div><div class=\"status\">Complete</div><div class=\"day\">Day 14</div></div><div class=\"lead\"></div><button class=\"clean point\"></button><div class=\"lead-after\"></div><ul class=\"headings\"><li><h4>Design Concepts</h4></li><li><time>{{ vm.events.designConcepts.created }}</time></li></ul></section><hr/></li><li><ul ng-show=\"vm.expanded.designConcepts\" class=\"events\"><li class=\"submissions completed no-progress\"><section class=\"checkpoint\"><a href=\"{{ vm.events.designConcepts.submissionUrl }}\"><button ng-click=\"vm.showMessagingWidget = true\" title=\"download files\" class=\"point count clean\"><div class=\"icon download smallest\"></div></button></a><div class=\"lead-after\"></div><ul class=\"avatars\"><li ng-repeat=\"avatarUrl in vm.events.designConcepts.submissionAvatars track by $index\"><avatar avatar-url=\"{{ avatarUrl }}\"></avatar></li></ul></section><p>{{ vm.events.designConcepts.submissionAvatars.length }} people have submitted design concepts to your project.</p><p><a href=\"#\">View all submissions</a></p></li><li ng-repeat=\"comment in vm.events.designConcepts.comments track by $index\" ng-show=\"vm.expanded.designConcepts\" class=\"comment no-progress completed\"><section class=\"checkpoint\"><button ng-click=\"vm.showMessagingWidget = true\" class=\"clean point\"><div class=\"notification\">{{ comment.notification }}</div><div class=\"icon envelope smallest\"></div></button><div class=\"lead-after\"></div><p><avatar ng-src=\"{{ comment.avatar }}\"></avatar>{{ comment.handle }}</p></section><p>Ok, I\'ll give the yellow buttons at the top a try and see how it looks.</p><ul class=\"files\"><li ng-repeat=\"thumbnail in comment.thumbnails track by $index\"><img ng-src=\"{{ thumbnail }} \"/></li></ul><a href=\"#\">view message</a></li><li class=\"winners completed no-progress\"><section class=\"checkpoint\"><div class=\"point\"></div><div class=\"lead-after\"></div><p>Congratulations! You have confirmed your winners for the design concepts phase.</p></section><ul class=\"avatars\"><li ng-repeat=\"avatar in vm.events.designConcepts.winnerAvatars track by $index\"><avatar avatar-url=\"{{ avatar }}\"></avatar></li></ul></li><li ng-show=\"vm.expanded.designConcepts\" class=\"notification messages no-progress completed\"><section class=\"checkpoint\"><button ng-click=\"vm.showMessagingWidget = true\" class=\"point count clean\"><div class=\"notification\">{{ message.notification }}</div></button><div class=\"lead-after\"></div><p><avatar url=\"{{ message.avatar }}\"></avatar>{{ message.message }}</p></section><ul class=\"links\"><li><button ng-click=\"vm.showMessagingWidget = true\" class=\"clean\">View</button></li><li><a ui-sref=\"messaging({ id: message.threadId })\">View full thread</a></li></ul><div ng-class=\"{ active: vm.showMessagingWidget }\" class=\"expandable-content\"><button ng-click=\"vm.showMessagingWidget = false\" class=\"clean close\">&times;</button><messaging thread-id=\"{{ message.threadId }}\" subscriber-id=\"Batman\" class=\"widget\"></messaging></div></li></ul></li><li ng-class=\"{ completed: vm.events.finalDesigns.created, passed: vm.events.finalDesigns.created, expanded: vm.expanded.finalDesigns }\" ng-click=\"vm.expanded.finalDesigns = !vm.expanded.finalDesigns\" class=\"milestone\"><section class=\"checkpoint\"><div class=\"progress\"><div class=\"percent\">70%</div><div class=\"status\">Complete</div><div class=\"day\">Day 20</div></div><div class=\"lead\"></div><button class=\"clean point\"></button><div class=\"lead-after\"></div><ul class=\"headings\"><li><h4>Final Designs</h4></li><li><time>{{ vm.events.finalDesigns.created }}</time></li></ul></section><hr/></li><li><ul ng-show=\"vm.expanded.finalDesigns\" class=\"events\"><li class=\"submissions completed no-progress\"><section class=\"checkpoint\"><button ng-click=\"vm.showMessagingWidget = true\" title=\"download files\" class=\"point count clean\"><div class=\"icon download smallest\"></div></button><div class=\"lead-after\"></div><ul class=\"avatars\"><li ng-repeat=\"avatarUrl in vm.events.finalDesigns.submissionAvatars track by $index\"><avatar avatar-url=\"{{ avatarUrl }}\"></avatar></li></ul></section><p>{{ vm.events.finalDesigns.submissionAvatars.length }} people have submitted design concepts to your project.</p><p><a href=\"#\">View all submissions</a></p></li><li class=\"winners completed no-progress\"><section class=\"checkpoint\"><div class=\"point\"></div><div class=\"lead-after\"></div><p>Congratulations! You have confirmed your winners for the final design phase.</p></section><ul class=\"avatars\"><li ng-repeat=\"avatar in vm.events.finalDesigns.winnerAvatars track by $index\"><avatar avatar-url=\"{{ avatar }}\"></avatar></li></ul></li></ul></li><li ng-class=\"{ completed: vm.events.finalFixes.created, passed: vm.events.finalFixes.created, expanded: vm.expanded.finalFixes }\" ng-click=\"vm.expanded.finalFixes = !vm.expanded.finalFixes\" class=\"milestone\"><section class=\"checkpoint\"><div class=\"progress\"><div class=\"percent\">70%</div><div class=\"status\">Complete</div><div class=\"day\">Day 20</div></div><div class=\"lead\"></div><button class=\"clean point\"></button><div class=\"lead-after\"></div><ul class=\"headings\"><li><h4>Final Fixes</h4></li><li><time>{{ vm.events.finalFixes.created }}</time></li></ul></section><hr/></li><li><ul ng-show=\"vm.expanded.finalFixes\" class=\"events\"><li class=\"submissions completed no-progress\"><section class=\"checkpoint\"><a href=\"{{ vm.events.finalFixes.submissionUrl }}\"><button ng-click=\"vm.showMessagingWidget = true\" title=\"download files\" class=\"point count clean\"><div class=\"icon download smallest\"></div></button></a><div class=\"lead-after\"></div><avatar avatar-url=\"{{  vm.events.finalFixes.submissionAvatar }}\"></avatar></section><p>1 person has submitted final fixes to your project.</p><p><a href=\"#\">View all submissions</a></p></li><li ng-repeat=\"comment in vm.events.finalFixes.comments track by $index\" ng-show=\"vm.expanded.finalFixes\" class=\"comment no-progress completed\"><section class=\"checkpoint\"><button ng-click=\"vm.showMessagingWidget = true\" class=\"clean point\"><div class=\"notification\">{{ comment.notification }}</div><div class=\"icon envelope smallest\"></div></button><div class=\"lead-after\"></div><p><avatar ng-src=\"{{ comment.avatar }}\"></avatar>{{ comment.handle }}</p></section><p>Ok, I\'ll give the yellow buttons at the top a try and see how it looks.</p><ul class=\"files\"><li ng-repeat=\"thumbnail in comment.thumbnails track by $index\"><img ng-src=\"{{ thumbnail }} \"/></li></ul><a href=\"#\">view message</a></li><li class=\"completed no-progress\"><section class=\"checkpoint\"><div class=\"point\"></div><div class=\"lead-after\"></div><p><avatar avatar-url=\"{{ vm.events.finalFixes.winnerAvatar }}\"></avatar>Congratulations! Your project has been completed successfully.</p></section></li></ul></li><li ng-class=\"{ completed: vm.events.completed, passed: vm.events.completed }\" class=\"milestone\"><section class=\"checkpoint\"><div class=\"progress\"><div class=\"percent\">100%</div><div class=\"status\">Complete</div><div class=\"day\">Day 20</div></div><div class=\"lead\"></div><button class=\"clean point\"></button><div class=\"lead-after\"></div><ul class=\"headings\"><li><h4>Project Complete</h4></li><li><time>{{vm.events.completed.created}}</time></li></ul></section><hr/></li></ul>");}]);
(function() {
  'use strict';
  var directive;

  directive = function() {
    return {
      restrict: 'E',
      controller: 'TimelineController as vm',
      templateUrl: 'views/timeline.directive.html',
      scope: {
        workId: '@workId'
      }
    };
  };

  angular.module('appirio-tech-ng-timeline').directive('timeline', directive);

}).call(this);

(function() {
  'use strict';
  var TimelineController;

  TimelineController = function($scope, $stateParams, TimelineAPIService) {
    var activate, vm;
    vm = this;
    vm.events = {};
    vm.expanded = {
      submitted: false,
      launched: false,
      designConcepts: false,
      finalDesigns: false,
      finalFixes: false
    };
    activate = function() {
      var params, resource;
      vm.workId = $scope.workId;
      params = {
        workId: vm.workId
      };
      resource = TimelineAPIService.get(params);
      resource.$promise.then(function(data) {
        return vm.events = data;
      });
      return vm;
    };
    return activate();
  };

  TimelineController.$inject = ['$scope', '$stateParams', 'TimelineAPIService'];

  angular.module('appirio-tech-ng-timeline').controller('TimelineController', TimelineController);

}).call(this);
